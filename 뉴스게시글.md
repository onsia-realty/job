# 용인 경남아너스빌 - 뉴스 게시글 작성 가이드

> **배포 사이트**: https://yongin-honorsville.vercel.app/press
> **GitHub**: https://github.com/onsia-realty/Yongin_Honorsville.git

---

## 1. 시스템 구조

### 데이터베이스: Neon PostgreSQL
```
환경변수: BLOG_DATABASE_URL
테이블: blog_posts
```

### 파일 구조
```
app/
├── press/
│   ├── page.tsx              # 기사 목록 (DB에서 조회)
│   └── [slug]/
│       └── page.tsx          # 기사 상세 (DB에서 조회)
├── api/
│   ├── generate-blog-post/
│   │   └── route.ts          # 블로그 포스트 생성 API
│   └── cron/
│       └── daily-blog/
│           └── route.ts      # 자동 블로그 생성 크론
├── components/
│   ├── ShareButtons.tsx      # 공유 버튼
│   ├── RemoveInlineCTA.tsx   # 인라인 CTA 제거
│   └── schema/
│       └── ArticleSchema.tsx # SEO 스키마
└── public/
    └── blog-images/          # 기사 이미지
```

---

## 2. 데이터베이스 스키마 (`blog_posts` 테이블)

```sql
CREATE TABLE blog_posts (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  title VARCHAR(255) NOT NULL,
  slug VARCHAR(255) UNIQUE NOT NULL,
  excerpt TEXT,
  content TEXT NOT NULL,
  keywords TEXT[] DEFAULT '{}',
  category VARCHAR(100) DEFAULT '부동산 뉴스',
  author VARCHAR(100) DEFAULT '관리자',
  published_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  views INTEGER DEFAULT 0,
  status VARCHAR(20) DEFAULT 'published',
  seo_title VARCHAR(255),
  seo_description TEXT,
  featured_image VARCHAR(500),
  source VARCHAR(100)
);
```

### 필드 설명
| 필드 | 타입 | 설명 |
|------|------|------|
| `slug` | VARCHAR | URL 경로 (예: `yongin-cluster-apartment-2025-12`) |
| `content` | TEXT | HTML 본문 |
| `keywords` | TEXT[] | PostgreSQL 배열 타입 해시태그 |
| `category` | VARCHAR | `부동산 뉴스`, `언론보도`, `분양 정보` 등 |
| `status` | VARCHAR | `published`, `draft` |
| `featured_image` | VARCHAR | 대표 이미지 경로 |
| `source` | VARCHAR | 원본 출처 (내부 메타용) |

---

## 3. 새 기사 추가 방법

### 방법 1: SQL 직접 삽입
```sql
INSERT INTO blog_posts (
  title,
  slug,
  excerpt,
  content,
  keywords,
  category,
  author,
  seo_title,
  seo_description,
  featured_image
) VALUES (
  '용인 반도체 클러스터 아파트, 분양가 비교',
  'yongin-cluster-apartment-price-2026-01',
  'SEO 설명 160자 이내...',
  '<p class="text-lg leading-relaxed">본문 HTML...</p>',
  ARRAY['용인 아파트', '경남아너스빌', '분양가 비교'],
  '부동산 뉴스',
  '관리자',
  '용인 반도체 클러스터 아파트 분양가 비교 | 경남아너스빌',
  'SEO 메타 설명...',
  '/blog-images/article-image.webp'
);
```

### 방법 2: API 사용 (`/api/generate-blog-post`)
```typescript
// POST /api/generate-blog-post
const response = await fetch('/api/generate-blog-post', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    title: '기사 제목',
    content: '<p>HTML 본문</p>',
    keywords: ['태그1', '태그2'],
    category: '부동산 뉴스',
    featured_image: '/blog-images/image.webp'
  })
});
```

---

## 4. 본문 HTML 작성 스타일

### 4.1 소제목 (어두운 배경)
```html
<h2 class="text-2xl font-bold mt-8 mb-4"
    style="color: #ffffff; background-color: #0b0719; padding: 10px 15px; border-radius: 5px;">
  소제목 텍스트
</h2>
```

### 4.2 본문 단락
```html
<p class="text-lg leading-relaxed">
  본문 내용. <strong>강조 텍스트</strong>는 bold 처리.
</p>

<p class="leading-relaxed">
  일반 단락 텍스트...
</p>
```

### 4.3 정보 박스 (파란색)
```html
<div style="background-color: #e8f4fd; border-left: 4px solid #1976d2; padding: 15px 20px; margin: 20px 0; border-radius: 0 8px 8px 0;">
  <p style="margin: 0; color: #1565c0;">
    <strong>시세 포인트</strong><br>
    용인 처인구 양지면 84㎡ 기준: 4억5000만~5억원
  </p>
</div>
```

### 4.4 정보 박스 (초록색)
```html
<div style="background-color: #e8f5e9; border-left: 4px solid #4caf50; padding: 15px 20px; margin: 20px 0; border-radius: 0 8px 8px 0;">
  <p style="margin: 0; color: #2e7d32;">
    <strong>경남아너스빌 핵심 정보</strong><br>
    총 997세대 | 84㎡·123㎡ | SK하이닉스 10분대 | 삼성전자 15분대
  </p>
</div>
```

### 4.5 테이블
```html
<table style="width: 100%; border-collapse: collapse; margin: 20px 0;">
  <thead>
    <tr style="background-color: #0b0719; color: white;">
      <th style="padding: 12px; text-align: left; border: 1px solid #ddd;">구분</th>
      <th style="padding: 12px; text-align: left; border: 1px solid #ddd;">가격</th>
      <th style="padding: 12px; text-align: left; border: 1px solid #ddd;">비고</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="padding: 12px; border: 1px solid #ddd;">기존 단지</td>
      <td style="padding: 12px; border: 1px solid #ddd;">4억5000만원</td>
      <td style="padding: 12px; border: 1px solid #ddd;">실거래가</td>
    </tr>
    <tr style="background-color: #f9f9f9;">
      <td style="padding: 12px; border: 1px solid #ddd;">신규 분양</td>
      <td style="padding: 12px; border: 1px solid #ddd;">6억원</td>
      <td style="padding: 12px; border: 1px solid #ddd;">옵션 포함</td>
    </tr>
  </tbody>
</table>
```

### 4.6 목록
```html
<ul style="padding-left: 20px; line-height: 2;" class="list-disc">
  <li><strong>실질 분양가 확인</strong>: 발코니 확장비, 유상 옵션 포함 여부</li>
  <li><strong>주변 시세 비교</strong>: 인근 기존 단지 실거래가와의 격차</li>
  <li><strong>교통 인프라</strong>: 대중교통 접근성, 주요 도로망</li>
</ul>
```

### 4.7 내부 링크
```html
<p>
  분양 일정은 <a href="/sales-schedule" style="color: #0066cc;">분양일정 페이지</a>에서,
  <a href="/registration" style="color: #0066cc;">관심고객 등록</a>으로 최신 소식을 받아보세요.
</p>
```

### 4.8 구분선 + 연락처
```html
<hr style="margin: 40px 0; border: none; border-top: 1px solid #e0e0e0;">

<p style="color: #666; text-align: center;">
  분양 문의: <a href="tel:1668-5257" style="color: #0066cc;"><strong>1668-5257</strong></a> |
  홈페이지: <a href="/business" style="color: #0066cc;">사업개요 보기</a>
</p>
```

---

## 5. 이미지 처리

### 이미지 저장 위치
```
public/blog-images/
├── yongin-semiconductor-cluster.webp
├── mayor-inspection.png
└── new-article-image.webp
```

### 이미지 참조 방법
```html
<!-- featured_image 필드에 저장 -->
/blog-images/yongin-semiconductor-cluster.webp

<!-- 본문 내 이미지 -->
<figure>
  <img src="/blog-images/image.webp" alt="설명" style="width: 100%; border-radius: 8px;">
  <figcaption style="text-align: center; color: #666; margin-top: 8px;">
    (이미지는 뉴스 내용을 기반으로 재구성)
  </figcaption>
</figure>
```

### 이미지 캡션 규칙 (CLAUDE.md 참고)
```html
<!-- AI 생성 이미지일 경우 -->
(이미지는 뉴스 내용을 기반으로 재구성)
(보도 내용을 바탕으로 제작된 이미지)

<!-- 절대 사용 금지 -->
❌ (사진=용인특례시)
❌ (사진=핀포인트뉴스)
```

---

## 6. URL 슬러그 규칙

### 형식
```
{주제}-{연도}-{월}
예: yongin-cluster-apartment-price-comparison-2025-12
```

### 규칙
- 영어 소문자 + 하이픈만 사용
- 한글 사용 금지 (URL 인코딩 문제)
- 날짜 포함 권장 (YYYY-MM)
- 최대 60자 이내
- 공백 → 하이픈 변환

---

## 7. 뉴스 소스 출처 규칙 (CLAUDE.md 참고)

### 절대 금지
```html
❌ 본 게시글은 핀포인트뉴스(2025.12.22) 보도 내용을 참고하여 작성되었습니다
❌ 핀포인트뉴스 보도에 따르면...
❌ 본문 하단에 뉴스 출처 표기
```

### 허용
```sql
-- DB의 source 필드에만 저장 (내부 메타용)
source = 'news-pinpoint'
```

---

## 8. 인라인 CTA 금지 규칙

### 본문에 넣으면 안 되는 것
```html
❌ <div class="cta-section">
     <h3>더 자세한 정보가 필요하신가요?</h3>
     <button>전화 상담하기</button>
     <button>카카오톡 문의</button>
   </div>
```

### 이유
- 페이지 레이아웃에 이미 CTA 섹션이 있음 (`app/press/[slug]/page.tsx` 하단)
- 중복으로 시각적 혼란 유발

---

## 9. 조회 함수 (참고용)

### 기사 목록 조회
```typescript
async function getBlogPosts(): Promise<BlogPost[]> {
  const sql = neon(process.env.BLOG_DATABASE_URL);
  const posts = await sql`
    SELECT id, title, slug, excerpt, category, published_at, views, keywords, featured_image
    FROM blog_posts
    WHERE status = 'published'
    ORDER BY published_at DESC
    LIMIT 20
  `;
  return posts;
}
```

### 기사 상세 조회
```typescript
async function getBlogPost(slug: string): Promise<BlogPost | null> {
  const sql = neon(process.env.BLOG_DATABASE_URL);
  const posts = await sql`
    SELECT * FROM blog_posts
    WHERE slug = ${slug} AND status = 'published'
    LIMIT 1
  `;
  return posts[0] || null;
}
```

### 관련 기사 조회 (키워드 기반)
```typescript
async function getRelatedPosts(currentSlug: string, keywords: string[]): Promise<BlogPost[]> {
  const sql = neon(process.env.BLOG_DATABASE_URL);
  const posts = await sql`
    SELECT id, title, slug, excerpt, category, published_at, keywords
    FROM blog_posts
    WHERE slug != ${currentSlug}
      AND status = 'published'
      AND keywords && ${keywords}  -- PostgreSQL 배열 교집합
    ORDER BY published_at DESC
    LIMIT 3
  `;
  return posts;
}
```

---

## 10. SEO 체크리스트

- [ ] `title`: 60자 이내, 핵심 키워드 포함
- [ ] `seo_description`: 160자 이내
- [ ] `keywords`: 관련 키워드 5~7개 (PostgreSQL 배열)
- [ ] `featured_image`: 1200x630px OG 이미지
- [ ] `slug`: 영문 소문자, 하이픈, 60자 이내
- [ ] 내부 링크 포함: `/sales-schedule`, `/registration`
- [ ] 이미지 alt 속성 필수
